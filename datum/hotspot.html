<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;hotspot - MonkeStation 2.0</title>
</head>
<body>
<header>
    <a href="index.html">MonkeStation 2.0</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/hotspot.html#var">Var Details</a> - <a href="datum/hotspot.html#proc">Proc Details</a></header>
<main>
<h1>hotspot <aside>/<a href="datum.html">datum</a>/<a href="datum/hotspot.html">hotspot</a></aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L1">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 1"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/hotspot.html#var/base_heat">base_heat</a></th><td>the base amount of heat every hotspot starts with</td></tr>
            <tr><th><a href="datum/hotspot.html#var/bonus_heat">bonus_heat</a></th><td>how much of our heat is bonus heat</td></tr>
            <tr><th><a href="datum/hotspot.html#var/can_drift">can_drift</a></th><td>are we able to drift?</td></tr>
            <tr><th><a href="datum/hotspot.html#var/center">center</a></th><td>the center point of our hotspot stored as a datum as its more than a turf.
The reason its a datum over a turf is because i dont wanna add listeners to a turf incase of destruction as we dont deal with the turf enough to justify that.
another reason is because this needs to be tracked on the trench aswell</td></tr>
            <tr><th><a href="datum/hotspot.html#var/drift_count">drift_count</a></th><td>the amount of counts we've gone up, compares against the above var for movement</td></tr>
            <tr><th><a href="datum/hotspot.html#var/drift_direction">drift_direction</a></th><td>the direction we are currently drifting, randomized on creation.</td></tr>
            <tr><th><a href="datum/hotspot.html#var/drift_speed">drift_speed</a></th><td>the speed in seconds until we move</td></tr>
            <tr><th><a href="datum/hotspot.html#var/heat_diminish">heat_diminish</a></th><td>list of statics
the amount of heat we lose per turf</td></tr>
            <tr><th><a href="datum/hotspot.html#var/leeway">leeway</a></th><td>the amount of distance of leeway we give tile_heat.</td></tr>
            <tr><th><a href="datum/hotspot.html#var/per_disturbance">per_disturbance</a></th><td>the amount of heat we add per disturbance</td></tr>
            <tr><th><a href="datum/hotspot.html#var/radius">radius</a></th><td>the radius of our hotspot</td></tr>
            <tr><th><a href="datum/hotspot.html#var/vent_count">vent_count</a></th><td>number of capturing vents inside of us</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/hotspot.html#proc/calculate_vent_count">calculate_vent_count</a></th><td>we want hotspots to always stay on the station z-level
okay so um, you can somehow get values higher than world.maxx or world.maxy according to runtimes so this fixes that
this proc is pretty expensive but it forces a recalculation of vents in the radius of the hotspot from the center</td></tr>
            <tr><th><a href="datum/hotspot.html#proc/get_tile_heat">get_tile_heat</a></th><td>this returns the amount of heat the given tile generates, if none returns 0/FALSE</td></tr>
            <tr><th><a href="datum/hotspot.html#proc/is_edge_or_blacklist">is_edge_or_blacklist</a></th><td>we check if we touch the worlds edge, or hit a turf we deem as a blacklist ie unbreakable trench edge walls
if we are end of round or pre round no point in checking vents or dousing rods. As latter there will never be any and former doesn't matter as rounds over.
we need to recalculate vents
list of heat dousing rods in the radius
assign the ocean turf and check if captured if so add to {vent_count}
now we early return a [locate] on a dousing rod. If we find one we add it to a list to run checks on at the end
now we check if the dousing rods are deployed, and if so we follow the hotspot</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/base_heat"><aside class="declaration">var </aside>base_heat
            <aside>&ndash; /static</aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L6">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 6"/></a></h3>
        <p>the base amount of heat every hotspot starts with</p><h3 id="var/bonus_heat"><aside class="declaration">var </aside>bonus_heat
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L13">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 13"/></a></h3>
        <p>how much of our heat is bonus heat</p><h3 id="var/can_drift"><aside class="declaration">var </aside>can_drift
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L21">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 21"/></a></h3>
        <p>are we able to drift?</p><h3 id="var/center"><aside class="declaration">var </aside>center
            <aside>&ndash; /<a href="datum.html">datum</a>/hotspot_center</aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L17">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 17"/></a></h3>
        <p>the center point of our hotspot stored as a datum as its more than a turf.
The reason its a datum over a turf is because i dont wanna add listeners to a turf incase of destruction as we dont deal with the turf enough to justify that.
another reason is because this needs to be tracked on the trench aswell</p><h3 id="var/drift_count"><aside class="declaration">var </aside>drift_count
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L27">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 27"/></a></h3>
        <p>the amount of counts we've gone up, compares against the above var for movement</p><h3 id="var/drift_direction"><aside class="declaration">var </aside>drift_direction
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L23">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 23"/></a></h3>
        <p>the direction we are currently drifting, randomized on creation.</p><h3 id="var/drift_speed"><aside class="declaration">var </aside>drift_speed
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L25">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 25"/></a></h3>
        <p>the speed in seconds until we move</p><h3 id="var/heat_diminish"><aside class="declaration">var </aside>heat_diminish
            <aside>&ndash; /static</aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L4">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 4"/></a></h3>
        <p>list of statics
the amount of heat we lose per turf</p><h3 id="var/leeway"><aside class="declaration">var </aside>leeway
            <aside>&ndash; /static</aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L10">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 10"/></a></h3>
        <p>the amount of distance of leeway we give tile_heat.</p><h3 id="var/per_disturbance"><aside class="declaration">var </aside>per_disturbance
            <aside>&ndash; /static</aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L8">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 8"/></a></h3>
        <p>the amount of heat we add per disturbance</p><h3 id="var/radius"><aside class="declaration">var </aside>radius
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L19">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 19"/></a></h3>
        <p>the radius of our hotspot</p><h3 id="var/vent_count"><aside class="declaration">var </aside>vent_count
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L29">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 29"/></a></h3>
        <p>number of capturing vents inside of us</p><h2 id="proc">Proc Details</h2><h3 id="proc/calculate_vent_count"><aside class="declaration">proc </aside>calculate_vent_count<aside>(/<a href="turf.html">turf</a>/center_turf) 
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L88">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 88"/></a></aside>
        </h3>
        <p>we want hotspots to always stay on the station z-level
okay so um, you can somehow get values higher than world.maxx or world.maxy according to runtimes so this fixes that
this proc is pretty expensive but it forces a recalculation of vents in the radius of the hotspot from the center</p><h3 id="proc/get_tile_heat"><aside class="declaration">proc </aside>get_tile_heat<aside>(/<a href="turf.html">turf</a>/given_turf) 
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L96">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 96"/></a></aside>
        </h3>
        <p>this returns the amount of heat the given tile generates, if none returns 0/FALSE</p><h3 id="proc/is_edge_or_blacklist"><aside class="declaration">proc </aside>is_edge_or_blacklist<aside>(/<a href="turf.html">turf</a>/destination) 
        
    
            <a href="https://github.com/lolc4n/Monkestation2.0/blob/4538a4717373e0bd52ded18b596460dcd539f81a/monkestation/code/modules/ocean_content/hotspot/hotspot.dm#L78">
        <img src="git.png" width="16" height="16" title="monkestation&#x2F;code&#x2F;modules&#x2F;ocean_content&#x2F;hotspot&#x2F;hotspot.dm 78"/></a></aside>
        </h3>
        <p>we check if we touch the worlds edge, or hit a turf we deem as a blacklist ie unbreakable trench edge walls
if we are end of round or pre round no point in checking vents or dousing rods. As latter there will never be any and former doesn't matter as rounds over.
we need to recalculate vents
list of heat dousing rods in the radius
assign the ocean turf and check if captured if so add to {vent_count}
now we early return a [locate] on a dousing rod. If we find one we add it to a list to run checks on at the end
now we check if the dousing rods are deployed, and if so we follow the hotspot</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/lolc4n/Monkestation2.0/tree/4538a4717373e0bd52ded18b596460dcd539f81a">4538a47</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.8.0</a></footer>
</body>
</html>
